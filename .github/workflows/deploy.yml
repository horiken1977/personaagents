name: Deploy to Sakura Internet

# main ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸæ™‚ã«å®Ÿè¡Œ
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    # ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
    - name: Checkout code
      uses: actions/checkout@v4
    
    # ã•ãã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«FTPãƒ‡ãƒ—ãƒ­ã‚¤
    - name: Deploy to Sakura Internet via FTP
      uses: SamKirkland/FTP-Deploy-Action@v4.3.4
      with:
        server: ${{ secrets.FTP_HOST }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        server-dir: ${{ secrets.FTP_SERVER_DIR }}
        # ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾è±¡å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®š
        exclude: |
          **/.git*
          **/.git*/**
          **/node_modules/**
          **/.DS_Store
          **/.github/**
          **/README.md
          **/.gitignore
          **/package*.json
          **/logs/**
          **/.vscode/**
          **/development/**
          **/tests/**
          **/docs/**
        
    # ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†é€šçŸ¥
    - name: Deployment notification
      run: |
        echo "âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã¾ã—ãŸï¼"
        echo "ğŸŒ ã‚µã‚¤ãƒˆURL: https://[ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå].sakura.ne.jp/"
        echo "ğŸ“ ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’ç¢ºèªã—ã¦ãã ã•ã„"